userid > username
userid > firstname
userid > lastname
userid > password
friendshipid > friend1
friendshipid > friend2
friendshipid > createdat
conversationid > friendshipid
conversationid > title
conversationid > createdat
messageid > message
messageid > senderid
messageid > timestamp
messageid > reciverid
messageid > conversationid


DROP TABLE Users;
CREATE TABLE users(
    id INT AUTO_INCREMENT,
    username VARCHAR(50),
    firstname VARCHAR(50), 
    lastname VARCHAR(50), 
    CONSTRAINT PK_USER PRIMARY KEY (id)
);

CREATE TABLE friendship(
    id INT AUTO_INCREMENT,
    friend1id INT,
    friend2id INT,
    createdat INT,
    CONSTRAINT FK_FRIENDSHIP1_USER foreign key (friend1id) references users(id),
    CONSTRAINT FK_FRIENDSHIP2_USER foreign key (friend2id) references users(id),
    CONSTRAINT PK_FRIENDSHIP primary key (id)
);

DROP TABLE conversation;
CREATE TABLE conversations(
  id INT AUTO_INCREMENT,
  friendshipid INT,
  title VARCHAR(50),
  createdat INT,
  CONSTRAINT FK_CONV_FRIENDSHIP foreign key (friendshipid) references friendship(id),
  CONSTRAINT PK_CONV primary key (id)
);

DROP TABLE message
CREATE TABLE messages(
  id INT AUTO_INCREMENT,
  message TEXT,
  timstamp INT,
  conversationid INT,
  senderid INT,
  reciverid INT,
  CONSTRAINT PK_MESSAGE primary key (id),
  CONSTRAINT FK_MESSAGE_SENDER foreign key (senderid) references users(id),
  CONSTRAINT FK_MESSAGE_CONV foreign key (conversationid) references conversations(id),
  CONSTRAINT FK_MESSAGE_RECIVER foreign key (reciverid) references users(id)
);
